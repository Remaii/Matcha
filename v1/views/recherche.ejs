<% include partial/header %>

<div class="row">
	<div class="col-md-12 col-xs-12">
		<h3 class="text-center">Tu recherche ?</h3>
		<form action="/profile" method="post">
			<div class="col-md-12 col-xs-12">
				<div class="col-xs-6 col-md-6">
					<label class="col-xs-12 col-md-12 text-center">Sexe</label>
					<select id="sexe" class="form-control text-center input-sm" name="sexe" size="1">
						<option></option>
						<option>Homme</option>
						<option>Femme</option>
					</select>
				</div>
				<div class="col-xs-6 col-md-6">
					<label class="col-xs-12 col-md-12 text-center">Orientation Sexuel</label>
					<select id="orient" class="form-control text-center input-sm" name="sexe" size="1">
						<option></option>
						<option>Bi</option>
						<option>Gay</option>
						<option>Hetero</option>
					</select>
				</div>
				<div class="text-center">
					<label class="col-xs-12 col-md-12 text-center">Tag</label>
    			<% if (locals.session['interet']) { %>
    				<% var col = 0; for (var i = 0; locals.session['interet'][i]; i++) {%>
    					<input type="checkbox" name="select" value="<%= locals.session['interet'][i] %>"> <%= locals.session['interet'][i] %>
    					<% if (col == 6) { %>
    						</br>
    						<% col = 0; %>
    					<% } %>
    				<% }
    			} %>
				</div>
				<div class="col-md-6 col-xs-6 text-center">
					<label class="col-xs-12 col-md-12 text-center">Ã‚ge</label>
					<input id="agemin" class="text-center col-md-6 col-xs-6" type="number" name="age" value="18" min="18" max="80" onchange="agemax.min=value;">
					<input id="agemax" class="text-center col-md-6 col-xs-6" type="number" name="age" value="80" min="18" max="80" onchange="agemin.max=value;">
				</div>
				<div class="col-md-6 col-xs-6 text-center">
					<label class="col-xs-12 col-md-12 text-center">Distance</label>
					<input id="dist" class="text-center col-md-12 col-xs-12" type="number" name="distance" min="0" max="500" value="200">
				</div>
			</div>
			<input id="search" class="form-control btn-primary" text-center" type="button" name="recherche" value="Lancer la recherche">
		</form>
	</div>
</div>
<div id="SearchRes">
	
</div>

<script type="text/javascript">
var button = document.querySelector('#search');

button.addEventListener('click', function(ev) {
	var agemin = document.querySelector('#agemin').value,
		agemax = document.querySelector('#agemax').value,
		sexe = document.querySelector('#sexe').value,
		orient = document.querySelector('#orient').value,
		dist = document.querySelector('#dist').value,
		result = document.querySelector('#SearchRes'),
		xhr = new XMLHttpRequest();

	xhr.onreadystatechange = function() {
		if (xhr.readyState == 4) {
			result.innerHTML = xhr.responseText;
		}
	}
	xhr.open("POST", "/profile", true);
	xhr.setRequestHeader("Content-Type", "application/-www-form-urlencoded");
	xhr.send('s=' + sexe + '&os=' + orient + '&amin=' + agemin + '&amax=' + agemax + '&d=' + dist);
});
</script>

<% include partial/footer %>